# LMR Rules Authority v1.7.4

## Status
This document is the authoritative rules definition for **Last Man Running (LMR)** as of version **1.7.4**.
It supersedes v1.7.3. Engine, UI, tests, and snapshots must conform to this document.

---

## 1. Dice Lifecycle Overview

A player’s Turn consists of resolving all dice available to that player, including any Extra Dice earned.

Dice move through the following lifecycle states:

1. **Rolled Dice** – Dice generated by a roll action.
2. **Pending Dice** – Rolled dice that are awaiting resolution.
3. **Active Die** – A single Pending Die currently designated for resolution.
4. **Resolved Die** – A die that has been spent by a move or forfeited.

At all times, the lifecycle is governed by the invariants in §4.

---

## 2. Active Die

An **Active Die** is a designation applied to exactly one Pending Die at a time.

- At most one Active Die may exist at any time.
- The Active Die is selected from the set of Pending Dice.
- The Active Die may be re-designated back to Pending without being resolved.
- The existence of an Active Die does **not** force a move or forfeiture.

The Active Die represents the die currently under consideration for resolution.

---

## 3. Pending Dice

When dice are rolled, they enter play as **Pending Dice**.

- Pending Dice must be resolved one at a time.
- When multiple Pending Dice exist, the player chooses which Pending Die becomes the Active Die.
- If no choice is specified, a deterministic order is used.

---

## 4. Banked Extra Dice

### 4.1 Definition

**Banked Extra Dice** represent owed dice that must be rolled before the Turn may advance.

### 4.2 Earning Extra Dice

A player earns one Banked Extra Die for each of the following:
- Rolling a qualifying die value (e.g., 1 or 6, per game options).
- Performing a qualifying capture/kill when Kill Roll is enabled.

### 4.3 Cashout Rule (Locked)

If a player has **N Banked Extra Dice**, the next roll consists of **N dice**, producing **N Pending Dice**, and reducing Banked Extra Dice to zero **before** any new extras are earned from that roll.

Extra Dice earned from that roll are added after the cashout.

---

## 5. Turn Advancement Invariants (§4.4)

A Turn may **not** advance to the next player while **any** of the following conditions hold:

- A die is Active.
- Any Pending Dice remain.
- There are Banked Extra Dice to roll.

These conditions are state-based and do not force a move or forfeiture.

---

## 6. Auto-Pass Clarification

If a roll produces Pending Dice with **no legal moves**, those dice are forfeited via auto-pass.

- Auto-pass resolves all such Pending Dice immediately.
- **If Banked Extra Dice remain after auto-pass, the Turn does not advance.**
- If no Pending Dice and no Banked Extra Dice remain, the Turn may advance.

Auto-pass never bypasses the Banked Extra Dice obligation.

---

## 7. Resolution Rules

- Dice must be rolled before they are resolved.
- Dice must be resolved before a Turn may end.
- Each move resolves exactly one Active Die.

---

## 8. Consistency Requirement

All engine logic, UI behavior, tests, and snapshots must align with this document.
Any deviation is a defect.

---

## Change Log

### v1.7.4
- Canonicalized **Active Die** terminology.
- Locked Banked Extra Dice cashout semantics (N dice at once).
- Clarified Turn advancement invariants.
- Clarified Auto-Pass interaction with Banked Extra Dice.
